# 🎧 扬声器录制工具 Pro v2.0

这是一个基于 Python 的现代化图形界面应用程序，用于录制计算机扬声器播放的声音（内录功能）。

## 🚀 新版本特性

### 🔧 架构升级
- **模块化设计**: 采用多模块架构，代码结构更清晰
- **单一入口**: 统一的 `main.py` 入口文件
- **配置分离**: 独立的配置文件管理
- **易于维护**: 符合软件工程最佳实践

### 🎨 界面美化
- **现代化UI**: 采用卡片式设计和现代化配色
- **直观图标**: 使用emoji图标提升用户体验
- **实时反馈**: 动态进度显示和状态更新
- **响应式布局**: 更好的视觉层次和信息展示
- **优化尺寸**: 窗口尺寸调整为540x540，确保所有控件完整显示

### 📐 布局优化
- **窗口尺寸**: 540x540像素，提供充足显示空间
- **间距调整**: 优化各区域间距和内边距
- **控件可见**: 确保所有按钮和控件不会被遮挡
- **响应式设计**: 支持窗口大小调整

### 🎛️ 菜单栏功能
- **顶部菜单栏**: 统一的功能入口
- **文件菜单**: 保存位置选择、退出程序
- **视图菜单**: 窗口置顶开关（替代原来的设置选项）
- **帮助菜单**: 关于信息查看

## 📁 项目结构

```
rec/
├── main.py              # 🎯 主入口文件（唯一入口点）
├── config.py            # ⚙️ 项目配置文件
├── requirements.txt     # 📦 依赖包列表
├── README.md           # 📖 项目说明文档
├── core/               # 🎯 核心模块
│   ├── __init__.py
│   └── recorder.py     # 🔊 音频录制核心逻辑
└── ui/                 # 🎨 用户界面模块
    ├── __init__.py
    └── gui.py          # 🖼️ 图形界面实现
```

## 🛠️ 环境要求

- **Python**: 3.6 或更高版本
- **操作系统**: Windows 8+/macOS/Linux（支持 loopback recording）
- **权限**: 无需管理员权限

## 📦 安装依赖

```bash
pip install -r requirements.txt
```

## ▶️ 运行方式

### 开发模式
```bash
python main.py
```

### 生产模式（打包为exe）
```bash
# 安装PyInstaller
pip install pyinstaller

# 打包命令
pyinstaller --noconsole --onefile main.py

# 优化版打包（减小文件大小）
pyinstaller --noconsole --onefile --strip --exclude-module tkinter.test --exclude-module tkinter.dnd --exclude-module numpy.testing main.py
```

## 🎯 使用指南

### 菜单栏操作
- **文件** → 选择保存位置：自定义录制文件保存路径
- **文件** → 退出：关闭应用程序
- **视图** → 窗口置顶：切换窗口是否始终保持在最前端
- **帮助** → 关于：查看软件版本和作者信息

### 主要功能操作
1. **启动程序**: 运行 `main.py` 或双击生成的exe文件
2. **检查设备**: 确认设备信息区域显示正确的音频设备
3. **设置参数**: 选择合适的采样率（推荐48000Hz）
4. **开始录制**: 点击"● 开始录制"按钮
5. **结束录制**: 点击"⏹ 结束录制"按钮自动保存文件

## 🏗️ 模块说明

### `main.py` - 主入口
- 程序的唯一入口点
- 负责初始化和启动整个应用
- 处理全局异常和错误

### `core/recorder.py` - 核心录制模块
```python
from core.recorder import AudioRecorder

recorder = AudioRecorder()
recorder.start_recording(samplerate=48000)
recorder.stop_recording()
```

**主要功能**:
- 音频设备检测和初始化
- 支持采样率检测
- 多线程音频录制
- WAV文件保存

### `ui/gui.py` - 图形界面模块
```python
from ui.gui import ModernGUI
import tkinter as tk

root = tk.Tk()
app = ModernGUI(root)
```

**界面特色**:
- 现代化卡片式布局
- 实时状态和进度显示
- 响应式按钮设计
- 直观的操作反馈
- **顶部菜单栏统一管理功能**
- 优化的窗口尺寸和间距

### `config.py` - 配置管理
集中管理所有配置参数，包括：
- 应用程序基本信息
- 窗口和UI配置
- 音频参数设置
- 文件路径配置

## 🔧 开发说明

### 代码规范
- 遵循PEP 8编码规范
- 使用类型注解提高代码可读性
- 模块间职责明确分离
- 异常处理完善

### 扩展建议
1. **添加更多音频格式支持** (MP3, FLAC等)
2. **集成音频预览功能**
3. **添加录制计划任务**
4. **实现云端存储集成**

## 🐛 故障排除

### 常见问题

1. **无法检测音频设备**
   - 检查音频驱动是否正常
   - 确认系统支持loopback recording
   - 尝试重启音频服务

2. **录制质量不佳**
   - 提高采样率设置
   - 检查系统音频设置
   - 关闭其他音频应用

3. **保存文件失败**
   - 检查磁盘空间
   - 确认文件路径权限
   - 验证文件名合法性

4. **界面显示问题**
   - 确保窗口尺寸足够（540x540）
   - 检查显示器分辨率设置
   - 尝试调整窗口大小

### 系统兼容性
- **Windows**: 完全支持（Windows 8+）
- **macOS**: 需要Soundflower或BlackHole等虚拟音频设备
- **Linux**: 需要PulseAudio或JACK支持

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🤝 贡献

欢迎提交Issue和Pull Request来改进项目！

---

**作者**: uokyi  
**版本**: 2.0.0  
**发布日期**: 2026-01-30